{% extends "layout.html" %}
{% block content %}
  <a class="btn btn-success" href="{{ url_for('menu_items.new_menu_item') }}">New Menu Item</a>
  {% if menu_items %}
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Price</th>
        <th>Type</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      {% for item in menu_items %}
      <tr>
        <td>{{ item.menu_item_id }}</td>
        <td>{{ item.name }}</td>
        <td>‚Ç¨ {{ '%.2f'|format(item.price) }}</td>
        <td>
          {% if item.item_type == "pizza" %}
            <span style="color: #d2691e;">üçï Pizza</span>
          {% elif item.item_type == "drink" %}
            <span style="color: #4169e1;">ü•§ Drink</span>
          {% elif item.item_type == "dessert" %}
            <span style="color: #8b4513;">üç∞ Dessert</span>
          {% else %}
            General
          {% endif %}
        </td>
        <td>
          {% if item.item_type == "pizza" %}
            {% set pizza = Pizza.query.get(item.item_ref_id) %}
            {% if pizza and pizza.ingredients %}
              <div class="pizza-ingredients">
                Ingredients: 
                {% for ingredient in pizza.ingredients %}
                  {{ ingredient.ingredient_name }}{% if not loop.last %}, {% endif %}
                {% endfor %}
              </div>
            {% else %}
              <em>No ingredients</em>
            {% endif %}
          {% else %}
            ‚Äî
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>No menu items yet.</p>
  {% endif %}
{% endblock %}
