{% extends "layout.html" %}
{% block content %}
  {% if orders%}
  <div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Customer</th>
        <th class="items-column">Items</th>
        <th>Total</th>
        <th>Delivery Person</th>
        <th>Delivery Address</th>
        <th>Order Time</th>
        <th>Pickup Time</th>
        <th>Expected Delivery Time</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders%}
      <tr>
        <td>{{ order.order_id }}</td>
        <td>{{ order.customer.full_name }}</td>
        <td class="items-column">
          {% if order.order_items %}
            <ul style="margin: 0; padding-left: 1rem;">
              {% for item in order.order_items %}
                <li>{{ item.amount }} √ó {{ item.menu_item.name }}</li>
              {% endfor %}
            </ul>
          {% else %}‚Äî{% endif %}
        </td>
        <td>‚Ç¨ {{ '%.2f'|format(order.total_price) }}</td>
        <td>{{ order.delivery_person.full_name }}</td>
        <td>{{ order.delivery_address or "Not specified" }}</td>
        <td>{{ order.order_time.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>{{ order.pickup_time.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>{{ order.expected_delivery_time.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          {% if order.status == 'delivered' %}
            <span style="color: green;">‚úì Delivered</span>
          {% elif order.status == 'out_for_delivery' %}
            <span style="color: orange;">üöö Out for Delivery</span>
          {% else %}
            <span style="color: blue;">‚è≥ Pending</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
  {% else %}
    <p>No orders yet.</p>
  {% endif %}
{% endblock %}